import { useState, useEffect, useMemo } from 'react';

// Enhanced emoji search data with keywords
const EMOJI_KEYWORDS = {
  // Smileys & Emotion
  'ðŸ˜€': ['grinning', 'happy', 'smile', 'joy'],
  'ðŸ˜ƒ': ['grinning', 'happy', 'smile', 'joy'],
  'ðŸ˜„': ['grinning', 'happy', 'smile', 'joy', 'laugh'],
  'ðŸ˜': ['grinning', 'happy', 'smile', 'joy'],
  'ðŸ˜†': ['laughing', 'happy', 'smile', 'joy', 'laugh'],
  'ðŸ˜…': ['sweat', 'smile', 'relief', 'nervous'],
  'ðŸ¤£': ['rolling', 'laugh', 'funny', 'hilarious'],
  'ðŸ˜‚': ['tears', 'laugh', 'funny', 'crying'],
  'ðŸ™‚': ['smile', 'happy', 'slight'],
  'ðŸ™ƒ': ['upside', 'down', 'silly'],
  'ðŸ˜‰': ['wink', 'flirt', 'playful'],
  'ðŸ˜Š': ['blush', 'happy', 'smile', 'pleased'],
  'ðŸ˜‡': ['angel', 'innocent', 'halo'],
  'ðŸ¥°': ['love', 'hearts', 'adore', 'crush'],
  'ðŸ˜': ['heart', 'eyes', 'love', 'crush'],
  'ðŸ¤©': ['star', 'eyes', 'excited', 'wow'],
  'ðŸ˜˜': ['kiss', 'love', 'heart'],
  'ðŸ˜—': ['kiss', 'whistle'],
  'â˜ºï¸': ['smile', 'happy', 'relaxed'],
  'ðŸ˜š': ['kiss', 'closed', 'eyes'],
  'ðŸ˜™': ['kiss', 'smile'],
  'ðŸ˜‹': ['yum', 'tongue', 'delicious', 'tasty'],
  'ðŸ˜›': ['tongue', 'playful', 'silly'],
  'ðŸ˜œ': ['wink', 'tongue', 'playful', 'silly'],
  'ðŸ¤ª': ['crazy', 'wild', 'silly', 'zany'],
  'ðŸ˜': ['tongue', 'closed', 'eyes', 'playful'],
  'ðŸ¤‘': ['money', 'rich', 'dollar', 'greedy'],
  'ðŸ¤—': ['hug', 'embrace', 'hands'],
  'ðŸ¤­': ['giggle', 'secret', 'oops'],
  'ðŸ¤«': ['shush', 'quiet', 'secret'],
  'ðŸ¤”': ['thinking', 'hmm', 'consider'],
  'ðŸ˜': ['neutral', 'meh', 'expressionless'],
  'ðŸ˜‘': ['expressionless', 'blank', 'meh'],
  'ðŸ˜¶': ['no', 'mouth', 'quiet', 'silent'],
  'ðŸ˜': ['smirk', 'smug', 'sly'],
  'ðŸ˜’': ['unamused', 'annoyed', 'meh'],
  'ðŸ™„': ['eye', 'roll', 'annoyed', 'whatever'],
  'ðŸ˜¬': ['grimace', 'awkward', 'nervous'],
  'ðŸ¤¥': ['liar', 'pinocchio', 'lie'],
  'ðŸ˜”': ['sad', 'down', 'disappointed'],
  'ðŸ˜ª': ['sleepy', 'tired', 'yawn'],
  'ðŸ¤¤': ['drool', 'sleep', 'want'],
  'ðŸ˜´': ['sleep', 'zzz', 'tired'],
  'ðŸ˜·': ['mask', 'sick', 'doctor', 'covid'],
  'ðŸ¤’': ['sick', 'fever', 'ill'],
  'ðŸ¤•': ['hurt', 'bandage', 'injured'],
  'ðŸ¤¢': ['sick', 'nausea', 'green'],
  'ðŸ¤®': ['vomit', 'sick', 'puke'],
  'ðŸ¤§': ['sneeze', 'sick', 'tissue'],
  'ðŸ¥µ': ['hot', 'sweat', 'heat'],
  'ðŸ¥¶': ['cold', 'freeze', 'blue'],
  'ðŸ˜µ': ['dizzy', 'confused', 'dead'],
  'ðŸ¤¯': ['mind', 'blown', 'explode'],
  'ðŸ¤ ': ['cowboy', 'hat', 'western'],
  'ðŸ¥³': ['party', 'celebrate', 'birthday'],
  'ðŸ˜Ž': ['cool', 'sunglasses', 'awesome'],
  'ðŸ¤“': ['nerd', 'geek', 'smart'],
  'ðŸ§': ['monocle', 'fancy', 'inspect'],
  'ðŸ˜•': ['confused', 'sad', 'disappointed'],
  'ðŸ˜Ÿ': ['worried', 'concerned', 'sad'],
  'ðŸ™': ['sad', 'frown', 'disappointed'],
  'â˜¹ï¸': ['sad', 'frown', 'disappointed'],
  'ðŸ˜®': ['surprised', 'wow', 'oh'],
  'ðŸ˜¯': ['surprised', 'hushed', 'wow'],
  'ðŸ˜²': ['shocked', 'surprised', 'wow'],
  'ðŸ˜³': ['flushed', 'embarrassed', 'shy'],
  'ðŸ¥º': ['pleading', 'puppy', 'eyes', 'cute'],
  'ðŸ˜¦': ['frowning', 'sad', 'disappointed'],
  'ðŸ˜§': ['anguished', 'worried', 'sad'],
  'ðŸ˜¨': ['fearful', 'scared', 'afraid'],
  'ðŸ˜°': ['anxious', 'sweat', 'worried'],
  'ðŸ˜¥': ['sad', 'sweat', 'disappointed'],
  'ðŸ˜¢': ['cry', 'sad', 'tear'],
  'ðŸ˜­': ['sob', 'cry', 'tears', 'bawl'],
  'ðŸ˜±': ['scream', 'scared', 'shocked'],
  'ðŸ˜–': ['confounded', 'frustrated', 'sad'],
  'ðŸ˜£': ['persevere', 'struggle', 'frustrated'],
  'ðŸ˜ž': ['disappointed', 'sad', 'dejected'],
  'ðŸ˜“': ['sweat', 'sad', 'tired'],
  'ðŸ˜©': ['weary', 'tired', 'frustrated'],
  'ðŸ˜«': ['tired', 'frustrated', 'fed', 'up'],
  'ðŸ¥±': ['yawn', 'tired', 'sleepy', 'bored'],
  'ðŸ˜¤': ['huff', 'angry', 'frustrated'],
  'ðŸ˜¡': ['angry', 'mad', 'rage', 'red'],
  'ðŸ˜ ': ['angry', 'mad', 'annoyed'],
  'ðŸ¤¬': ['swearing', 'angry', 'mad', 'symbols'],
  'ðŸ˜ˆ': ['devil', 'evil', 'horns'],
  'ðŸ‘¿': ['devil', 'angry', 'evil'],
  'ðŸ’€': ['skull', 'death', 'dead'],
  'â˜ ï¸': ['skull', 'crossbones', 'death', 'pirate'],
  'ðŸ’©': ['poop', 'shit', 'crap'],
  'ðŸ¤¡': ['clown', 'funny', 'circus'],
  'ðŸ‘¹': ['ogre', 'monster', 'red'],
  'ðŸ‘º': ['goblin', 'monster', 'red'],
  'ðŸ‘»': ['ghost', 'boo', 'spooky'],
  'ðŸ‘½': ['alien', 'ufo', 'space'],
  'ðŸ‘¾': ['alien', 'monster', 'game'],
  'ðŸ¤–': ['robot', 'ai', 'machine'],

  // People & Body
  'ðŸ‘‹': ['wave', 'hello', 'hi', 'goodbye'],
  'ðŸ¤š': ['raised', 'hand', 'stop'],
  'ðŸ–ï¸': ['hand', 'five', 'stop'],
  'âœ‹': ['hand', 'stop', 'high', 'five'],
  'ðŸ––': ['spock', 'vulcan', 'star', 'trek'],
  'ðŸ‘Œ': ['ok', 'okay', 'perfect', 'good'],
  'ðŸ¤Œ': ['pinched', 'fingers', 'italian'],
  'ðŸ¤': ['pinch', 'small', 'tiny'],
  'âœŒï¸': ['peace', 'victory', 'two'],
  'ðŸ¤ž': ['crossed', 'fingers', 'luck', 'hope'],
  'ðŸ¤Ÿ': ['love', 'you', 'sign'],
  'ðŸ¤˜': ['rock', 'on', 'metal', 'horns'],
  'ðŸ¤™': ['call', 'me', 'hang', 'loose'],
  'ðŸ‘ˆ': ['point', 'left', 'finger'],
  'ðŸ‘‰': ['point', 'right', 'finger'],
  'ðŸ‘†': ['point', 'up', 'finger'],
  'ðŸ–•': ['middle', 'finger', 'rude'],
  'ðŸ‘‡': ['point', 'down', 'finger'],
  'â˜ï¸': ['point', 'up', 'finger', 'one'],
  'ðŸ‘': ['thumbs', 'up', 'good', 'yes', 'like', 'approve'],
  'ðŸ‘Ž': ['thumbs', 'down', 'bad', 'no', 'dislike'],
  'ðŸ‘Š': ['fist', 'bump', 'punch'],
  'âœŠ': ['fist', 'power', 'solidarity'],
  'ðŸ¤›': ['fist', 'bump', 'left'],
  'ðŸ¤œ': ['fist', 'bump', 'right'],
  'ðŸ‘': ['clap', 'applause', 'bravo', 'good', 'job'],
  'ðŸ™Œ': ['praise', 'hands', 'celebration', 'hooray'],
  'ðŸ‘': ['open', 'hands', 'hug'],
  'ðŸ¤²': ['palms', 'up', 'prayer', 'cupped'],
  'ðŸ¤': ['handshake', 'deal', 'agreement'],
  'ðŸ™': ['pray', 'thanks', 'please', 'namaste'],
  'âœï¸': ['write', 'writing', 'author'],
  'ðŸ’…': ['nail', 'polish', 'care', 'beauty'],
  'ðŸ¤³': ['selfie', 'camera', 'phone'],
  'ðŸ’ª': ['muscle', 'strong', 'flex', 'bicep'],

  // Hearts & Love
  'â¤ï¸': ['heart', 'love', 'red'],
  'ðŸ§¡': ['orange', 'heart', 'love'],
  'ðŸ’›': ['yellow', 'heart', 'love'],
  'ðŸ’š': ['green', 'heart', 'love'],
  'ðŸ’™': ['blue', 'heart', 'love'],
  'ðŸ’œ': ['purple', 'heart', 'love'],
  'ðŸ–¤': ['black', 'heart', 'love'],
  'ðŸ¤': ['white', 'heart', 'love'],
  'ðŸ¤Ž': ['brown', 'heart', 'love'],
  'ðŸ’”': ['broken', 'heart', 'sad', 'breakup'],
  'â£ï¸': ['heart', 'exclamation', 'love'],
  'ðŸ’•': ['two', 'hearts', 'love'],
  'ðŸ’ž': ['revolving', 'hearts', 'love'],
  'ðŸ’“': ['beating', 'heart', 'love'],
  'ðŸ’—': ['growing', 'heart', 'love'],
  'ðŸ’–': ['sparkling', 'heart', 'love'],
  'ðŸ’˜': ['heart', 'arrow', 'cupid', 'love'],
  'ðŸ’': ['heart', 'box', 'gift', 'love'],
  'ðŸ’Ÿ': ['heart', 'decoration', 'love'],

  // Nature
  'ðŸ”¥': ['fire', 'hot', 'lit', 'flame', 'burn'],
  'ðŸ’§': ['water', 'drop', 'tear', 'sweat'],
  'ðŸ’¦': ['sweat', 'droplets', 'water', 'splash'],
  'â­': ['star', 'favorite', 'awesome'],
  'ðŸŒŸ': ['glowing', 'star', 'sparkle'],
  'âœ¨': ['sparkles', 'magic', 'clean', 'shiny'],
  'âš¡': ['lightning', 'bolt', 'electric', 'fast'],
  'â˜€ï¸': ['sun', 'sunny', 'bright', 'day'],
  'ðŸŒ™': ['moon', 'night', 'crescent'],
  'ðŸŒˆ': ['rainbow', 'pride', 'colorful'],
  'â˜”': ['rain', 'umbrella', 'weather'],
  'â„ï¸': ['snow', 'cold', 'winter'],
  'ðŸŒŠ': ['wave', 'ocean', 'water', 'sea'],

  // Food & Drink
  'ðŸ•': ['pizza', 'food', 'italian'],
  'ðŸ”': ['burger', 'hamburger', 'food'],
  'ðŸŸ': ['fries', 'french', 'food'],
  'ðŸŒ­': ['hot', 'dog', 'food'],
  'ðŸ¥ª': ['sandwich', 'food'],
  'ðŸŒ®': ['taco', 'mexican', 'food'],
  'ðŸŒ¯': ['burrito', 'wrap', 'mexican'],
  'ðŸ': ['pasta', 'spaghetti', 'italian'],
  'ðŸœ': ['ramen', 'noodles', 'soup'],
  'ðŸ²': ['pot', 'food', 'stew'],
  'ðŸ¥—': ['salad', 'healthy', 'green'],
  'ðŸ¿': ['popcorn', 'movie', 'snack'],
  'ðŸ§€': ['cheese', 'food'],
  'ðŸ¥“': ['bacon', 'meat', 'breakfast'],
  'ðŸ¥š': ['egg', 'breakfast', 'food'],
  'ðŸ³': ['cooking', 'egg', 'pan'],
  'ðŸ¥ž': ['pancakes', 'breakfast', 'food'],
  'ðŸ§‡': ['waffle', 'breakfast', 'food'],
  'ðŸž': ['bread', 'food', 'loaf'],
  'ðŸ¥–': ['baguette', 'bread', 'french'],
  'ðŸ¥¨': ['pretzel', 'snack', 'food'],
  'ðŸ¥': ['croissant', 'bread', 'french'],
  'ðŸ°': ['cake', 'dessert', 'birthday'],
  'ðŸŽ‚': ['birthday', 'cake', 'celebration'],
  'ðŸ§': ['cupcake', 'dessert', 'sweet'],
  'ðŸª': ['cookie', 'dessert', 'sweet'],
  'ðŸ©': ['donut', 'doughnut', 'sweet'],
  'ðŸ­': ['lollipop', 'candy', 'sweet'],
  'ðŸ¬': ['candy', 'sweet', 'wrapper'],
  'ðŸ«': ['chocolate', 'bar', 'sweet'],
  'ðŸ¯': ['honey', 'sweet', 'bee'],
  'â˜•': ['coffee', 'drink', 'caffeine', 'morning'],
  'ðŸµ': ['tea', 'drink', 'hot'],
  'ðŸ¥¤': ['cup', 'straw', 'drink'],
  'ðŸ§ƒ': ['juice', 'box', 'drink'],
  'ðŸ¥›': ['milk', 'glass', 'drink'],
  'ðŸº': ['beer', 'drink', 'alcohol'],
  'ðŸ»': ['beers', 'cheers', 'drink', 'celebration'],
  'ðŸ·': ['wine', 'drink', 'alcohol'],
  'ðŸ¥‚': ['champagne', 'cheers', 'celebration'],
  'ðŸ¸': ['cocktail', 'drink', 'alcohol'],
  'ðŸ¹': ['tropical', 'drink', 'cocktail'],
  'ðŸ¾': ['champagne', 'bottle', 'celebration'],

  // Activities & Sports
  'âš½': ['soccer', 'football', 'ball', 'sport'],
  'ðŸ€': ['basketball', 'ball', 'sport'],
  'ðŸˆ': ['football', 'american', 'ball', 'sport'],
  'âš¾': ['baseball', 'ball', 'sport'],
  'ðŸŽ¾': ['tennis', 'ball', 'sport'],
  'ðŸ': ['volleyball', 'ball', 'sport'],
  'ðŸ“': ['ping', 'pong', 'table', 'tennis'],
  'ðŸŽ±': ['pool', 'billiards', 'eight', 'ball'],
  'ðŸ†': ['trophy', 'winner', 'award', 'champion'],
  'ðŸ¥‡': ['gold', 'medal', 'first', 'winner'],
  'ðŸ¥ˆ': ['silver', 'medal', 'second'],
  'ðŸ¥‰': ['bronze', 'medal', 'third'],
  'ðŸŽ¯': ['target', 'bullseye', 'dart'],
  'ðŸŽ®': ['video', 'game', 'controller'],
  'ðŸ•¹ï¸': ['joystick', 'game', 'arcade'],
  'ðŸŽ²': ['dice', 'game', 'random'],
  'ðŸŽª': ['circus', 'tent', 'entertainment'],
  'ðŸŽ­': ['theater', 'drama', 'masks'],
  'ðŸŽ¨': ['art', 'palette', 'creative'],
  'ðŸŽ¬': ['movie', 'film', 'cinema'],
  'ðŸŽ¤': ['microphone', 'sing', 'karaoke'],
  'ðŸŽ§': ['headphones', 'music', 'listen'],
  'ðŸŽµ': ['music', 'note', 'song'],
  'ðŸŽ¶': ['music', 'notes', 'song'],
  'ðŸŽ¸': ['guitar', 'music', 'rock'],
  'ðŸŽ¹': ['piano', 'keyboard', 'music'],
  'ðŸ¥': ['drum', 'music', 'beat'],
  'ðŸŽº': ['trumpet', 'music', 'brass'],
  'ðŸŽ·': ['saxophone', 'music', 'jazz'],
  'ðŸŽ»': ['violin', 'music', 'classical'],

  // Travel & Places
  'âœˆï¸': ['airplane', 'plane', 'travel', 'flight'],
  'ðŸš—': ['car', 'automobile', 'vehicle'],
  'ðŸš•': ['taxi', 'cab', 'car'],
  'ðŸš™': ['suv', 'car', 'vehicle'],
  'ðŸšŒ': ['bus', 'vehicle', 'public'],
  'ðŸšŽ': ['trolley', 'bus', 'vehicle'],
  'ðŸŽï¸': ['race', 'car', 'fast', 'formula'],
  'ðŸš“': ['police', 'car', 'cop'],
  'ðŸš‘': ['ambulance', 'emergency', 'medical'],
  'ðŸš’': ['fire', 'truck', 'emergency'],
  'ðŸš': ['van', 'vehicle'],
  'ðŸšš': ['truck', 'delivery', 'vehicle'],
  'ðŸš›': ['truck', 'semi', 'vehicle'],
  'ðŸšœ': ['tractor', 'farm', 'vehicle'],
  'ðŸï¸': ['motorcycle', 'bike', 'vehicle'],
  'ðŸ›µ': ['scooter', 'bike', 'vehicle'],
  'ðŸš²': ['bicycle', 'bike', 'cycle'],
  'ðŸ›´': ['scooter', 'kick', 'vehicle'],
  'ðŸ›¹': ['skateboard', 'skate', 'board'],
  'ðŸ›¼': ['roller', 'skate', 'wheels'],
  'ðŸš': ['helicopter', 'chopper', 'aircraft'],
  'ðŸ›¸': ['ufo', 'alien', 'spaceship'],
  'ðŸš€': ['rocket', 'space', 'launch'],
  'ðŸ›°ï¸': ['satellite', 'space', 'communication'],
  'ðŸš‚': ['train', 'locomotive', 'steam'],
  'ðŸšƒ': ['train', 'car', 'railway'],
  'ðŸš„': ['train', 'high', 'speed'],
  'ðŸš…': ['train', 'bullet', 'fast'],
  'ðŸš†': ['train', 'railway'],
  'ðŸš‡': ['metro', 'subway', 'underground'],
  'ðŸšˆ': ['light', 'rail', 'train'],
  'ðŸš‰': ['station', 'train', 'railway'],
  'ðŸšŠ': ['tram', 'trolley', 'streetcar'],
  'ðŸš': ['monorail', 'train'],
  'ðŸšž': ['mountain', 'railway', 'train'],
  'ðŸš‹': ['tram', 'car', 'streetcar'],
  'â›µ': ['sailboat', 'boat', 'sailing'],
  'ðŸ›¶': ['canoe', 'boat', 'paddle'],
  'ðŸš¤': ['speedboat', 'boat', 'fast'],
  'ðŸ›¥ï¸': ['motor', 'boat', 'yacht'],
  'ðŸ›³ï¸': ['passenger', 'ship', 'cruise'],
  'â›´ï¸': ['ferry', 'boat', 'ship'],
  'ðŸš¢': ['ship', 'boat', 'cruise'],
  'âš“': ['anchor', 'ship', 'boat'],
  'ðŸ ': ['house', 'home', 'building'],
  'ðŸ¡': ['house', 'home', 'garden'],
  'ðŸ¢': ['office', 'building', 'work'],
  'ðŸ£': ['post', 'office', 'building'],
  'ðŸ¤': ['post', 'office', 'european'],
  'ðŸ¥': ['hospital', 'medical', 'building'],
  'ðŸ¦': ['bank', 'building', 'money'],
  'ðŸ¨': ['hotel', 'building', 'accommodation'],
  'ðŸ©': ['love', 'hotel', 'building'],
  'ðŸª': ['convenience', 'store', 'shop'],
  'ðŸ«': ['school', 'building', 'education'],
  'ðŸ¬': ['department', 'store', 'shopping'],
  'ðŸ­': ['factory', 'building', 'industrial'],
  'ðŸ¯': ['castle', 'japanese', 'building'],
  'ðŸ°': ['castle', 'european', 'building'],
  'ðŸ—¼': ['tower', 'tokyo', 'landmark'],
  'ðŸ—½': ['statue', 'liberty', 'new', 'york'],
  'â›ª': ['church', 'building', 'religion'],
  'ðŸ•Œ': ['mosque', 'building', 'religion'],
  'ðŸ›•': ['hindu', 'temple', 'building'],
  'ðŸ•': ['synagogue', 'building', 'religion'],
  'â›©ï¸': ['shinto', 'shrine', 'building'],
  'ðŸ•‹': ['kaaba', 'mecca', 'building'],

  // Objects
  'ðŸ“±': ['phone', 'mobile', 'cell', 'smartphone'],
  'ðŸ’»': ['laptop', 'computer', 'pc'],
  'ðŸ–¥ï¸': ['desktop', 'computer', 'monitor'],
  'âŒ¨ï¸': ['keyboard', 'computer', 'type'],
  'ðŸ–±ï¸': ['mouse', 'computer', 'click'],
  'ðŸ–¨ï¸': ['printer', 'computer', 'print'],
  'ðŸ“·': ['camera', 'photo', 'picture'],
  'ðŸ“¸': ['camera', 'flash', 'photo'],
  'ðŸ“¹': ['video', 'camera', 'record'],
  'ðŸŽ¥': ['movie', 'camera', 'film'],
  'ðŸ“º': ['tv', 'television', 'watch'],
  'ðŸ“»': ['radio', 'music', 'listen'],
  'ðŸŽ™ï¸': ['microphone', 'studio', 'podcast'],
  'ðŸŽšï¸': ['level', 'slider', 'audio'],
  'ðŸŽ›ï¸': ['control', 'knobs', 'audio'],
  'â°': ['alarm', 'clock', 'time'],
  'â±ï¸': ['stopwatch', 'timer', 'time'],
  'â²ï¸': ['timer', 'clock', 'time'],
  'ðŸ•°ï¸': ['mantle', 'clock', 'time'],
  'âŒ›': ['hourglass', 'time', 'sand'],
  'â³': ['hourglass', 'flowing', 'sand', 'time'],
  'ðŸ“¡': ['satellite', 'antenna', 'communication'],
  'ðŸ”‹': ['battery', 'power', 'energy'],
  'ðŸ”Œ': ['plug', 'electric', 'power'],
  'ðŸ’¡': ['bulb', 'light', 'idea'],
  'ðŸ”¦': ['flashlight', 'torch', 'light'],
  'ðŸ•¯ï¸': ['candle', 'light', 'flame'],
  'ðŸ§¯': ['fire', 'extinguisher', 'safety'],
  'ðŸ’°': ['money', 'bag', 'dollar'],
  'ðŸ’µ': ['dollar', 'bill', 'money'],
  'ðŸ’´': ['yen', 'bill', 'money'],
  'ðŸ’¶': ['euro', 'bill', 'money'],
  'ðŸ’·': ['pound', 'bill', 'money'],
  'ðŸ’³': ['credit', 'card', 'payment'],
  'ðŸ’Ž': ['diamond', 'gem', 'precious'],
  'ðŸ”§': ['wrench', 'tool', 'fix'],
  'ðŸ”¨': ['hammer', 'tool', 'build'],
  'âš’ï¸': ['hammer', 'pick', 'tool'],
  'ðŸ› ï¸': ['hammer', 'wrench', 'tool'],
  'â›ï¸': ['pick', 'tool', 'mine'],
  'ðŸ”©': ['nut', 'bolt', 'screw'],
  'âš™ï¸': ['gear', 'settings', 'cog'],
  'ðŸ§²': ['magnet', 'attraction'],
  'ðŸ”«': ['gun', 'pistol', 'weapon'],
  'ðŸ’£': ['bomb', 'explosive', 'danger'],
  'ðŸ§¨': ['firecracker', 'explosive', 'dynamite'],
  'ðŸ”ª': ['knife', 'blade', 'cut'],
  'ðŸ—¡ï¸': ['sword', 'blade', 'weapon'],
  'âš”ï¸': ['crossed', 'swords', 'battle'],
  'ðŸ›¡ï¸': ['shield', 'protection', 'defense'],
  'ðŸ”®': ['crystal', 'ball', 'fortune'],
  'ðŸ’ˆ': ['barber', 'pole', 'haircut'],
  'âš—ï¸': ['alembic', 'chemistry', 'lab'],
  'ðŸ”­': ['telescope', 'space', 'stars'],
  'ðŸ”¬': ['microscope', 'science', 'lab'],
  'ðŸ’Š': ['pill', 'medicine', 'drug'],
  'ðŸ’‰': ['syringe', 'needle', 'vaccine'],
  'ðŸŒ¡ï¸': ['thermometer', 'temperature', 'fever'],
  'ðŸ§¹': ['broom', 'clean', 'sweep'],
  'ðŸ§½': ['sponge', 'clean', 'wash'],
  'ðŸ§´': ['lotion', 'bottle', 'soap'],
  'ðŸ”‘': ['key', 'lock', 'access'],
  'ðŸ—ï¸': ['old', 'key', 'vintage'],
  'ðŸšª': ['door', 'entrance', 'exit'],
  'ðŸ›‹ï¸': ['couch', 'sofa', 'furniture'],
  'ðŸ›ï¸': ['bed', 'sleep', 'furniture'],
  'ðŸ§¸': ['teddy', 'bear', 'toy'],
  'ðŸŽ': ['gift', 'present', 'box'],
  'ðŸŽˆ': ['balloon', 'party', 'celebration'],
  'ðŸŽ€': ['ribbon', 'bow', 'gift'],
  'ðŸŽŠ': ['confetti', 'ball', 'party'],
  'ðŸŽ‰': ['party', 'popper', 'celebration', 'tada'],
  'âœ‰ï¸': ['envelope', 'mail', 'letter'],
  'ðŸ“©': ['envelope', 'arrow', 'mail'],
  'ðŸ“¨': ['incoming', 'envelope', 'mail'],
  'ðŸ“§': ['email', 'mail', 'electronic'],
  'ðŸ’Œ': ['love', 'letter', 'mail'],
  'ðŸ“¦': ['package', 'box', 'delivery'],
  'ðŸ“‹': ['clipboard', 'list', 'notes'],
  'ðŸ“': ['folder', 'file', 'directory'],
  'ðŸ“‚': ['open', 'folder', 'file'],
  'ðŸ“„': ['page', 'document', 'file'],
  'ðŸ“ƒ': ['page', 'curl', 'document'],
  'ðŸ“‘': ['bookmark', 'tabs', 'document'],
  'ðŸ“Š': ['chart', 'bar', 'graph'],
  'ðŸ“ˆ': ['chart', 'increasing', 'graph'],
  'ðŸ“‰': ['chart', 'decreasing', 'graph'],
  'ðŸ““': ['notebook', 'book', 'notes'],
  'ðŸ“”': ['notebook', 'decorative', 'cover'],
  'ðŸ“’': ['ledger', 'notebook', 'book'],
  'ðŸ“•': ['closed', 'book', 'red'],
  'ðŸ“—': ['green', 'book', 'closed'],
  'ðŸ“˜': ['blue', 'book', 'closed'],
  'ðŸ“™': ['orange', 'book', 'closed'],
  'ðŸ“š': ['books', 'stack', 'library'],
  'ðŸ“–': ['open', 'book', 'read'],
  'ðŸ”–': ['bookmark', 'mark', 'tag'],
  'ðŸ“Ž': ['paperclip', 'attachment'],
  'ðŸ–‡ï¸': ['linked', 'paperclips'],
  'ðŸ“': ['triangular', 'ruler', 'math'],
  'ðŸ“': ['straight', 'ruler', 'measure'],
  'ðŸ“Œ': ['pushpin', 'pin', 'location'],
  'ðŸ“': ['round', 'pushpin', 'location'],
  'âœ‚ï¸': ['scissors', 'cut', 'tool'],
  'ðŸ–Šï¸': ['pen', 'write', 'ink'],
  'ðŸ–‹ï¸': ['fountain', 'pen', 'write'],
  'âœ’ï¸': ['black', 'nib', 'pen'],
  'ðŸ–Œï¸': ['paintbrush', 'art', 'paint'],
  'ðŸ–ï¸': ['crayon', 'color', 'art'],
  'ðŸ“': ['memo', 'note', 'write'],
  'âœï¸': ['pencil', 'write', 'draw'],
  'ðŸ”': ['magnifying', 'glass', 'search'],
  'ðŸ”Ž': ['magnifying', 'glass', 'right', 'search'],

  // Symbols
  'ðŸ’¯': ['hundred', 'points', 'perfect', 'score'],
  'ðŸ’¢': ['anger', 'symbol', 'mad'],
  'ðŸ’¥': ['collision', 'explosion', 'boom'],
  'ðŸ’«': ['dizzy', 'star', 'sparkle'],
  'ðŸ’¬': ['speech', 'balloon', 'talk'],
  'ðŸ’­': ['thought', 'balloon', 'think'],
  'ðŸ—¯ï¸': ['right', 'anger', 'bubble'],
  'â™ ï¸': ['spade', 'suit', 'cards'],
  'â™¥ï¸': ['heart', 'suit', 'cards'],
  'â™¦ï¸': ['diamond', 'suit', 'cards'],
  'â™£ï¸': ['club', 'suit', 'cards'],
  'ðŸƒ': ['joker', 'card', 'game'],
  'ðŸŽ´': ['flower', 'playing', 'cards'],
  'ðŸ€„': ['mahjong', 'red', 'dragon'],
  'ðŸ”‡': ['muted', 'speaker', 'quiet'],
  'ðŸ”ˆ': ['speaker', 'low', 'volume'],
  'ðŸ”‰': ['speaker', 'medium', 'volume'],
  'ðŸ”Š': ['speaker', 'high', 'volume'],
  'ðŸ“¢': ['loudspeaker', 'announcement'],
  'ðŸ“£': ['megaphone', 'cheering'],
  'ðŸ“¯': ['postal', 'horn', 'trumpet'],
  'ðŸ””': ['bell', 'notification', 'ring'],
  'ðŸ”•': ['bell', 'slash', 'mute'],
  'ðŸŽµ': ['musical', 'note', 'music'],
  'ðŸŽ¶': ['musical', 'notes', 'music'],
  'ðŸ’²': ['heavy', 'dollar', 'sign'],
  'ðŸ’±': ['currency', 'exchange'],
  'â„¢ï¸': ['trade', 'mark', 'trademark'],
  'Â©ï¸': ['copyright', 'symbol'],
  'Â®ï¸': ['registered', 'symbol'],
  'ã€°ï¸': ['wavy', 'dash', 'line'],
  'âž°': ['curly', 'loop'],
  'âž¿': ['double', 'curly', 'loop'],
  'ðŸ”š': ['end', 'arrow', 'finish'],
  'ðŸ”™': ['back', 'arrow', 'return'],
  'ðŸ”›': ['on', 'arrow', 'mark'],
  'ðŸ”': ['top', 'arrow', 'up'],
  'ðŸ”œ': ['soon', 'arrow', 'coming'],
  'âœ”ï¸': ['check', 'mark', 'yes'],
  'â˜‘ï¸': ['check', 'box', 'mark'],
  'ðŸ”˜': ['radio', 'button', 'select'],
  'âšª': ['white', 'circle', 'medium'],
  'âš«': ['black', 'circle', 'medium'],
  'ðŸ”´': ['red', 'circle', 'large'],
  'ðŸ”µ': ['blue', 'circle', 'large'],
  'ðŸŸ¢': ['green', 'circle', 'large'],
  'ðŸŸ¡': ['yellow', 'circle', 'large'],
  'ðŸŸ ': ['orange', 'circle', 'large'],
  'ðŸŸ£': ['purple', 'circle', 'large'],
  'ðŸŸ¤': ['brown', 'circle', 'large'],
  'â¬›': ['black', 'large', 'square'],
  'â¬œ': ['white', 'large', 'square'],
  'â—¼ï¸': ['black', 'medium', 'square'],
  'â—»ï¸': ['white', 'medium', 'square'],
  'â—¾': ['black', 'medium', 'small', 'square'],
  'â—½': ['white', 'medium', 'small', 'square'],
  'â–ªï¸': ['black', 'small', 'square'],
  'â–«ï¸': ['white', 'small', 'square'],
  'ðŸŸ¥': ['red', 'square', 'large'],
  'ðŸŸ§': ['orange', 'square', 'large'],
  'ðŸŸ¨': ['yellow', 'square', 'large'],
  'ðŸŸ©': ['green', 'square', 'large'],
  'ðŸŸ¦': ['blue', 'square', 'large'],
  'ðŸŸª': ['purple', 'square', 'large'],
  'ðŸŸ«': ['brown', 'square', 'large'],
  'ðŸ”¶': ['orange', 'diamond', 'large'],
  'ðŸ”·': ['blue', 'diamond', 'large'],
  'ðŸ”¸': ['orange', 'diamond', 'small'],
  'ðŸ”¹': ['blue', 'diamond', 'small'],
  'ðŸ”º': ['red', 'triangle', 'up'],
  'ðŸ”»': ['red', 'triangle', 'down'],
  'ðŸ’ ': ['diamond', 'shape', 'flower'],
  'ðŸ”³': ['white', 'square', 'button'],
  'ðŸ”²': ['black', 'square', 'button'],

  // Common words and expressions
  'ðŸ¤·': ['shrug', 'dunno', 'whatever', 'idk'],
  'ðŸ¤¦': ['facepalm', 'doh', 'stupid', 'mistake'],
  'ðŸ™ˆ': ['see', 'no', 'evil', 'monkey'],
  'ðŸ™‰': ['hear', 'no', 'evil', 'monkey'],
  'ðŸ™Š': ['speak', 'no', 'evil', 'monkey'],
  'ðŸ’¸': ['money', 'with', 'wings', 'expensive'],
  'ðŸŽ¯': ['direct', 'hit', 'target', 'bullseye'],
  'ðŸš€': ['rocket', 'launch', 'fast', 'growth'],
  'âš¡': ['zap', 'lightning', 'fast', 'energy'],
  'ðŸ”¥': ['fire', 'hot', 'trending', 'awesome'],
  'ðŸ’Ž': ['diamond', 'precious', 'valuable'],
  'ðŸ†': ['trophy', 'win', 'champion', 'best'],
  'ðŸŽ‰': ['celebration', 'party', 'congrats', 'yay'],
  'ðŸ‘‘': ['crown', 'king', 'queen', 'royal'],
  'ðŸ’ª': ['strong', 'power', 'muscle', 'strength'],
  'ðŸ§ ': ['brain', 'smart', 'think', 'intelligence'],
  'ðŸ‘€': ['eyes', 'looking', 'watching', 'see'],
  'ðŸ‘‚': ['ear', 'listening', 'hear'],
  'ðŸ‘ƒ': ['nose', 'smell'],
  'ðŸ‘„': ['mouth', 'lips', 'kiss'],
  'ðŸ‘…': ['tongue', 'taste', 'lick']
};

const STORAGE_KEY = 'chatter_emoji_usage';

export const useEmojis = () => {
  const [recentEmojis, setRecentEmojis] = useState([]);
  const [frequentEmojis, setFrequentEmojis] = useState({});

  // Load emoji usage data from localStorage
  useEffect(() => {
    try {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored) {
        const data = JSON.parse(stored);
        setRecentEmojis(data.recent || []);
        setFrequentEmojis(data.frequent || {});
      }
    } catch (error) {
      console.warn('Failed to load emoji usage data:', error);
    }
  }, []);

  // Save emoji usage
  const saveEmojiUsage = (emoji) => {
    try {
      const newRecent = [emoji, ...recentEmojis.filter(e => e !== emoji)].slice(0, 32);
      const newFrequent = { ...frequentEmojis, [emoji]: (frequentEmojis[emoji] || 0) + 1 };
      
      setRecentEmojis(newRecent);
      setFrequentEmojis(newFrequent);
      
      localStorage.setItem(STORAGE_KEY, JSON.stringify({
        recent: newRecent,
        frequent: newFrequent
      }));
    } catch (error) {
      console.warn('Failed to save emoji usage:', error);
    }
  };

  // Enhanced emoji search
  const searchEmojis = useMemo(() => {
    return (query) => {
      if (!query.trim()) return [];
      
      const searchTerm = query.toLowerCase().trim();
      const results = [];
      
      // Search through emoji keywords
      Object.entries(EMOJI_KEYWORDS).forEach(([emoji, keywords]) => {
        const score = keywords.reduce((acc, keyword) => {
          if (keyword.includes(searchTerm)) {
            // Exact match gets higher score
            if (keyword === searchTerm) return acc + 10;
            // Starts with gets medium score
            if (keyword.startsWith(searchTerm)) return acc + 5;
            // Contains gets lower score
            return acc + 1;
          }
          return acc;
        }, 0);
        
        if (score > 0) {
          results.push({ emoji, score });
        }
      });
      
      // Sort by score (highest first) and return emojis
      return results
        .sort((a, b) => b.score - a.score)
        .map(result => result.emoji)
        .slice(0, 50); // Limit results
    };
  }, []);

  // Get frequently used emojis
  const getFrequentEmojis = useMemo(() => {
    return (limit = 16) => {
      return Object.entries(frequentEmojis)
        .sort(([,a], [,b]) => b - a)
        .slice(0, limit)
        .map(([emoji]) => emoji);
    };
  }, [frequentEmojis]);



  return {
    recentEmojis,
    frequentEmojis,
    saveEmojiUsage,
    searchEmojis,
    getFrequentEmojis
  };
}; 